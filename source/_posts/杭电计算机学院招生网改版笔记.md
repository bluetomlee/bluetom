title: "杭电计算机学院招生网改版笔记"
date: 2014-05-21 12:24:05
tags:
---

<div style="color: #000000;"><div id="wmd-preview-section-38" class="wmd-preview-section preview-content" style="color: #162029;">**Sql数据库迁徙：**</div>
<div id="wmd-preview-section-39" class="wmd-preview-section preview-content" style="color: #162029;"><div class="se-section-delimiter"><div id="wmd-preview-section-2" class="wmd-preview-section preview-content" style="color: #162029;">**Sql数据库迁徙：**</div>
<div id="wmd-preview-section-3" class="wmd-preview-section preview-content" style="color: #162029;"><div class="se-section-delimiter"></div>

    <span class="com" style="color: #880000;">/*分别插入文章、目录表*/</span><span class="pln">
    insert </span><span class="kwd" style="color: #000088;">into</span><span class="pln"> wp_posts </span><span class="pun" style="color: #666600;">(</span><span class="pln">id</span><span class="pun" style="color: #666600;">,</span><span class="pln">post_author</span><span class="pun" style="color: #666600;">,</span><span class="pln">post_date</span><span class="pun" style="color: #666600;">,</span><span class="pln">post_content</span><span class="pun" style="color: #666600;">,</span><span class="pln">post_title</span><span class="pun" style="color: #666600;">,</span><span class="pln">post_name</span><span class="pun" style="color: #666600;">,</span><span class="pln">post_parent</span><span class="pun" style="color: #666600;">)</span><span class="kwd" style="color: #000088;">select</span><span class="pln"> aid</span><span class="pun" style="color: #666600;">,</span><span class="pln">author</span><span class="pun" style="color: #666600;">,</span><span class="pln">atime</span><span class="pun" style="color: #666600;">,</span><span class="pln">acontent</span><span class="pun" style="color: #666600;">,</span><span class="pln">atitle</span><span class="pun" style="color: #666600;">,</span><span class="pln">atitle</span><span class="pun" style="color: #666600;">,</span><span class="pln">abelong </span><span class="kwd" style="color: #000088;">from</span><span class="pln"> hdupczs</span><span class="pun" style="color: #666600;">.</span><span class="pln">article</span>`</pre></div>
    <div id="wmd-preview-section-19" class="wmd-preview-section preview-content" style="color: #162029;">

    <div class="se-section-delimiter"></div>
    <pre class="prettyprint prettyprinted" style="color: #333333;">`<span class="com" style="color: #880000;">/*wp_terms要转换两次
    wp_terms的term_id对应wp_term_taxonomy转换的term_taxonomy_id
    wp_term_relationships管理文章和目录的关系，用个内连接即可实现
    */</span><span class="pln">
    insert </span><span class="kwd" style="color: #000088;">into</span><span class="pln"> wp_term_relationships</span><span class="pun" style="color: #666600;">(</span><span class="pln">object_id</span><span class="pun" style="color: #666600;">,</span><span class="pln">term_taxonomy_id</span><span class="pun" style="color: #666600;">)</span><span class="kwd" style="color: #000088;">select</span><span class="pln"> ID</span><span class="pun" style="color: #666600;">,</span><span class="pln">post_parent  </span><span class="kwd" style="color: #000088;">from</span><span class="pln"> hdupczs</span><span class="pun" style="color: #666600;">.</span><span class="pln">wp_posts

    insert </span><span class="kwd" style="color: #000088;">into</span><span class="pln"> wp_term_relationships</span><span class="pun" style="color: #666600;">(</span><span class="pln">object_id</span><span class="pun" style="color: #666600;">,</span><span class="pln">term_taxonomy_id</span><span class="pun" style="color: #666600;">)</span><span class="pln"> 
    a</span><span class="pun" style="color: #666600;">.</span><span class="pln">ID b</span><span class="pun" style="color: #666600;">.</span><span class="pln">term_taxonomy_id </span><span class="kwd" style="color: #000088;">select</span><span class="kwd" style="color: #000088;">from</span><span class="pln"> wp_posts 
    a inner join wp_term_taxonomy b on a</span><span class="pun" style="color: #666600;">.</span><span class="pln">term_id</span><span class="pun" style="color: #666600;">=</span><span class="pln">b</span><span class="pun" style="color: #666600;">.</span><span class="pln">term_id

    update wp_term_relationships</span><span class="pun" style="color: #666600;">,</span><span class="pln">wp_term_taxonomy </span><span class="kwd" style="color: #000088;">set</span><span class="pln"> wp_term_relationships</span><span class="pun" style="color: #666600;">.</span><span class="pln">term_taxonomy_id</span><span class="pun" style="color: #666600;">=</span><span class="pln">wp_term_taxonomy</span><span class="pun" style="color: #666600;">.</span><span class="pln">term_taxonomy_id </span><span class="kwd" style="color: #000088;">where</span><span class="pln"> wp_term_relationships</span><span class="pun" style="color: #666600;">.</span><span class="pln">term_id</span><span class="pun" style="color: #666600;">=</span><span class="pln">wp_term_taxonomy</span><span class="pun" style="color: #666600;">.</span><span class="pln">term_id</span>`</pre><p>

    * * *

    **themes\dt-the7\inc\helpers.php报错**

    去除2396-2399行
    </div>
    <div id="wmd-preview-section-5" class="wmd-preview-section preview-content" style="color: #162029;"><div class="se-section-delimiter"></div>
    <pre class="prettyprint prettyprinted" style="color: #333333;">`<span class="pln">$cats </span><span class="pun" style="color: #666600;">=</span><span class="pln"> str_replace</span><span class="pun" style="color: #666600;">(</span><span class="str" style="color: #008800;">'&lt;a'</span><span class="pun" style="color: #666600;">,</span><span class="pln"> $linkBefore </span><span class="pun" style="color: #666600;">.</span><span class="str" style="color: #008800;">'&lt;a'</span><span class="pun" style="color: #666600;">.</span><span class="pln"> $linkAttr</span><span class="pun" style="color: #666600;">,</span><span class="pln"> $cats</span><span class="pun" style="color: #666600;">);</span><span class="pln">
                        $cats </span><span class="pun" style="color: #666600;">=</span><span class="pln"> str_replace</span><span class="pun" style="color: #666600;">(</span><span class="str" style="color: #008800;">'&lt;/a&gt;'</span><span class="pun" style="color: #666600;">,</span><span class="str" style="color: #008800;">'&lt;/a&gt;'</span><span class="pun" style="color: #666600;">.</span><span class="pln"> $linkAfter</span><span class="pun" style="color: #666600;">,</span><span class="pln"> $cats</span><span class="pun" style="color: #666600;">);</span><span class="pln">
                        $breadcrumbs_html </span><span class="pun" style="color: #666600;">.=</span><span class="pln"> $cats</span><span class="pun" style="color: #666600;">;</span>

`<span class="pun" style="color: #666600;"> </span>`</div></div></div></div>